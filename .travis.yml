before_install:
  chmod +x ./ci/build.sh ./ci/lab_manual/gen_html.sh

before_script:
  cd ci

addons:
  apt:
    packages:
      libxml2-utils
      ant
      xsltproc
      docbook-xsl-ns
      docbook5-xml
      fop

      libxml2-2.9.9
      docbook-xml-4.5
      docbook-xsl-1.79.2
      apache-ant-1.10.6
      libxslt-1.1.33
      python2
      ruby-2.6.3
      libsaxon-java
      default-jre
      xerces2Java
jobs:
  include:
    script: ./build.sh

deploy:
  provider: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN  # Set in the settings page of your repository, as a secure variable
  keep_history: true
  local_dir: build_output
  on:
    branch: master